// Generated by CoffeeScript 1.7.1
(function() {
  var handleCompletion, handleError;

  handleCompletion = function(value) {
    value = value.responseJSON;
    $('#result-div').html('<pre>' + JSON.stringify(value, null, 2) + '</pre>');
    return $('#count-button').removeAttr('disabled');
  };

  handleError = function() {
    console.log('got error');
    $('#result-div').html('ERROR');
    return $('#count-button').removeAttr('disabled');
  };

  window.countLines = function() {
    var comp;
    $('#count-button').attr('disabled', 'disabled');
    comp = encodeURIComponent($('#repository').val());
    return $.ajax("/cloc?url=" + comp, {
      complete: handleCompletion,
      error: handleError,
      dataType: 'json'
    });
  };

}).call(this);
